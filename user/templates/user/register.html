{% extends 'plateforme/index.html' %}
{% block content %}
<div class="container mb-5 mt-5">
    {% if messages %} {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">{{message}}</div>
    {% endfor %} {% endif %}
    <div class="border pl-4 pr-4  ">
    <h3 class="border-bottom pb-3 mb-3 mt-5">S'inscrire</h3>
    <form method="POST" id="form">
        {% csrf_token %}

        <div>
            <label for="first_name">Nom</label>
            <input type="text" name="first_name" id="first_name" class="form-control" required/>
        </div>
        <div>
            <label for="last_name">Pr√©nom</label>
            <input type="text" name="last_name" id="last_name" class="form-control" required/>
        </div>
        <div>
            <label for="username">Nom d'utilisateur</label>
            <input type="text" name="username" id="username" class="form-control" required/>
        </div>
        <div>
            <label for="email">Email</label>
            <input type="email" name="email" id="email" class="form-control" required/>
        </div>
        <div>
          <label for="password">Le mot de passe</label>
          <input
            type="password"
            name="password1"
            id="password1"
            class="form-control"
            required
          />
        </div>
        <div>
            <label for="password">Confirme Le mot de passe</label>
            <input
              type="password"
              name="password2"
              id="password2"
              class="form-control"
              required
            />
            <span style="display: none; color: red;" id="message">Les mots de passe ne correspondent pas</span>
          </div>
        <input class="btn btn-secondary mt-4 mb-4"  id="sub" value="S'inscrire">
    </form>
    <div class="border-top mt-4 pt-2 pb-4 text-center">
        <small> si vous avez un compte vous pouvez vous connecter ici </small><a href="{% url 'login'%}">connexion<a/>
    </div>
    </div>
</div>

<script>
    const checkPassword = () => {
        console.log("ezezeze");
        const form = document.querySelector("#form");
        const pass1 = document.querySelector("#password1").value;
        const pass2 = document.querySelector("#password2").value;
        console.log(pass1);
        console.log(pass2);
        if (!(pass1 === pass2)) {
            document.querySelector("#message").style.display = "block";
        } else {
            form.submit()
        }
    };
    const suBtn = document.querySelector("#sub")
    suBtn.addEventListener('click', checkPassword);

</script>
{% endblock content %}